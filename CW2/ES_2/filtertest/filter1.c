/******************************* SOURCE LICENSE *********************************
Copyright (c) 2015 MicroModeler.

A non-exclusive, nontransferable, perpetual, royalty-free license is granted to the Licensee to
use the following Information for academic, non-profit, or government-sponsored research purposes.
Use of the following Information under this License is restricted to NON-COMMERCIAL PURPOSES ONLY.
Commercial use of the following Information requires a separately executed written license agreement.

This Information is distributed WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

******************************* END OF LICENSE *********************************/

// A commercial license for MicroModeler DSP can be obtained at http://www.micromodeler.com/launch.jsp

#include "filter1.h"

#include <stdlib.h> // For malloc/free
#include <string.h> // For memset
#include <stdio.h>		// For test case I/O

short filter1_coefficients[20] =
{
// Scaled for a 16x16:32 Direct form 2 IIR filter with:
// Output shift = 15
// Input shift = 12
// Central shift = 14
// Input  has a maximum value of 1, scaled by 2^15
// Output has a maximum value of 1.7695328428379236, scaled by 2^14

    9767, -19535, 9767, 9846, -13683,// b0 Q16(0.149), b1 Q16(-0.298), b2 Q16(0.149), a1 Q14(0.601), a2 Q14(-0.835)
    8192, -16384, 8192, 11891, -15235,// b0 Q17(0.0625), b1 Q17(-0.125), b2 Q17(0.0625), a1 Q14(0.726), a2 Q14(-0.930)
    8192, 16384, 8192, 7655, -13626,// b0 Q16(0.125), b1 Q16(0.250), b2 Q16(0.125), a1 Q14(0.467), a2 Q14(-0.832)
    8192, 16384, 8192, 6390, -15172// b0 Q17(0.0625), b1 Q17(0.125), b2 Q17(0.0625), a1 Q14(0.390), a2 Q14(-0.926)

};

short filter1_impulseInput[239] =
{
	32767, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0, 0,
	0, 0, 0, 0, 0, 0, 0
};

float filter1_impulseOutput[239] =
{
	0.00007277, 0.00015893, -0.00032811, -0.00109101, 0.00023113, 0.00333510, 0.00196989, -0.00567796,
	-0.00783858, 0.00451514, 0.01594608, 0.00379768, -0.02086546, -0.01903086, 0.01586365, 0.03505846,
	0.00212338, -0.04200638, -0.02875868, 0.03183200, 0.05284868, -0.00398135, -0.06149930, -0.03262333,
	0.04717504, 0.06293649, -0.01255903, -0.07295945, -0.02976771, 0.05688609, 0.06289598, -0.02031439,
	-0.07353282, -0.02222340, 0.05817116, 0.05407767, -0.02437744, -0.06406974, -0.01324281, 0.05105172,
	0.04009308, -0.02342167, -0.04798259, -0.00572875, 0.03784835, 0.02504413, -0.01790516, -0.02963528,
	-0.00131002, 0.02205837, 0.01217583, -0.00961201, -0.01291728, -0.00015695, 0.00715470, 0.00322454,
	-0.00085306, -0.00036333, -0.00134657, -0.00431193, -0.00158055, 0.00631731, 0.00710148, -0.00347647,
	-0.01113278, -0.00308437, 0.01062578, 0.00991568, -0.00525056, -0.01339821, -0.00261292, 0.01175535,
	0.00935793, -0.00586028, -0.01213312, -0.00144465, 0.01021166, 0.00697367, -0.00510490, -0.00879897,
	-0.00047630, 0.00699999, 0.00411958, -0.00329184, -0.00483063, -0.00011326, 0.00325282, 0.00170736,
	-0.00101110, -0.00131704, -0.00034016, -0.00007787, 0.00014818, 0.00111267, 0.00113642, -0.00089051,
	-0.00239951, -0.00055515, 0.00261172, 0.00238507, -0.00143240, -0.00351837, -0.00064323, 0.00327094,
	0.00261802, -0.00171041, -0.00356909, -0.00043175, 0.00312740, 0.00219253, -0.00161583, -0.00288431,
	-0.00018659, 0.00240071, 0.00148454, -0.00118758, -0.00185533, -0.00006125, 0.00139257, 0.00078760,
	-0.00056532, -0.00082152, -0.00009174, 0.00039143, 0.00026969, 0.00007635, -0.00000751, -0.00022979,
	-0.00039371, -0.00002130, 0.00058720, 0.00049129, -0.00039090, -0.00086118, -0.00012202, 0.00087844,
	0.00068669, -0.00049751, -0.00100994, -0.00010857, 0.00093304, 0.00065668, -0.00050574, -0.00091001,
	-0.00005753, 0.00079354, 0.00050233, -0.00041281, -0.00066445, -0.00002191, 0.00053709, 0.00031408,
	-0.00024892, -0.00037493, -0.00002340, 0.00024784, 0.00015297, -0.00006082, -0.00011846, -0.00005721,
	-0.00000510, 0.00004647, 0.00010557, 0.00006237, -0.00010373, -0.00017993, -0.00000525, 0.00021796,
	0.00015757, -0.00014089, -0.00026419, -0.00001805, 0.00026347, 0.00018055, -0.00015330, -0.00026906,
	-0.00001236, 0.00024763, 0.00015633, -0.00013634, -0.00021964, -0.00000491, 0.00018863, 0.00011110,
	-0.00009546, -0.00014475, -0.00000478, 0.00010983, 0.00006519, -0.00004249, -0.00006909, -0.00001332,
	0.00003281, 0.00003021, 0.00000922, -0.00000890, -0.00002665, -0.00002717, 0.00000953, 0.00004884,
	0.00002894, -0.00003892, -0.00006300, 0.00000085, 0.00007050, 0.00004517, -0.00004527, -0.00007492,
	-0.00000073, 0.00007369, 0.00004524, -0.00004339, -0.00006830, -0.00000005, 0.00006219, 0.00003618,
	-0.00003389, -0.00005081, -0.00000031, 0.00004211, 0.00002426, -0.00001957, -0.00002989, -0.00000265,
	0.00001983, 0.00001372, -0.00000413, -0.00001114, -0.00000649, 0.00000050, 0.00000647, 0.00000902,
	0.00000233, -0.00001043, -0.00001286, 0.00000260, 0.00001761, 0.00000976, -0.00001301
};

short filter1_noiseInput[511] =
{
	32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767,
	32767, -32768, -32768, -32768, -32768, -32768, 32767, 32767,
	32767, 32767, -32768, 32767, 32767, 32767, 32767, 32767,
	-32768, -32768, -32768, 32767, -32768, 32767, 32767, 32767,
	-32768, -32768, 32767, 32767, -32768, -32768, 32767, -32768,
	-32768, -32768, -32768, -32768, 32767, -32768, -32768, 32767,
	-32768, 32767, -32768, -32768, 32767, 32767, 32767, -32768,
	32767, 32767, -32768, 32767, -32768, -32768, -32768, 32767,
	32767, 32767, 32767, -32768, -32768, 32767, 32767, 32767,
	32767, 32767, -32768, -32768, 32767, 32767, -32768, 32767,
	32767, -32768, -32768, -32768, 32767, -32768, 32767, -32768,
	32767, -32768, -32768, 32767, -32768, -32768, -32768, 32767,
	32767, 32767, -32768, -32768, -32768, 32767, 32767, -32768,
	32767, 32767, -32768, 32767, -32768, 32767, -32768, 32767,
	32767, 32767, -32768, -32768, -32768, 32767, -32768, -32768,
	32767, 32767, -32768, -32768, -32768, 32767, -32768, -32768,
	-32768, 32767, -32768, -32768, -32768, -32768, -32768, -32768,
	-32768, -32768, 32767, -32768, -32768, -32768, -32768, 32767,
	-32768, -32768, -32768, 32767, 32767, -32768, -32768, -32768,
	-32768, 32767, -32768, -32768, 32767, 32767, 32767, -32768,
	-32768, 32767, -32768, 32767, -32768, 32767, -32768, 32767,
	32767, -32768, -32768, -32768, -32768, 32767, 32767, -32768,
	32767, 32767, 32767, 32767, -32768, 32767, -32768, -32768,
	32767, 32767, -32768, 32767, 32767, 32767, -32768, -32768,
	32767, -32768, -32768, -32768, 32767, -32768, 32767, -32768,
	-32768, -32768, -32768, 32767, -32768, 32767, -32768, 32767,
	32767, -32768, 32767, -32768, -32768, 32767, 32767, 32767,
	32767, 32767, 32767, -32768, 32767, 32767, -32768, -32768,
	32767, -32768, -32768, 32767, -32768, -32768, 32767, -32768,
	32767, 32767, -32768, 32767, 32767, 32767, 32767, 32767,
	32767, -32768, -32768, 32767, -32768, -32768, 32767, 32767,
	-32768, 32767, -32768, 32767, -32768, -32768, 32767, 32767,
	-32768, -32768, 32767, 32767, -32768, -32768, -32768, -32768,
	-32768, -32768, -32768, 32767, 32767, -32768, -32768, -32768,
	32767, 32767, -32768, -32768, 32767, -32768, 32767, -32768,
	-32768, -32768, 32767, 32767, -32768, 32767, -32768, -32768,
	32767, -32768, 32767, 32767, 32767, 32767, 32767, 32767,
	32767, -32768, 32767, -32768, -32768, -32768, 32767, -32768,
	32767, 32767, -32768, -32768, -32768, 32767, 32767, 32767,
	-32768, 32767, -32768, 32767, 32767, -32768, -32768, 32767,
	-32768, 32767, 32767, -32768, -32768, 32767, 32767, 32767,
	32767, -32768, -32768, -32768, 32767, 32767, 32767, 32767,
	32767, -32768, 32767, 32767, 32767, -32768, 32767, -32768,
	-32768, -32768, -32768, -32768, 32767, 32767, -32768, 32767,
	-32768, 32767, 32767, -32768, 32767, 32767, -32768, 32767,
	32767, 32767, -32768, 32767, 32767, -32768, -32768, -32768,
	-32768, -32768, 32767, -32768, 32767, 32767, -32768, 32767,
	-32768, 32767, 32767, 32767, 32767, 32767, -32768, 32767,
	-32768, 32767, -32768, 32767, -32768, 32767, -32768, -32768,
	-32768, -32768, -32768, -32768, 32767, -32768, 32767, -32768,
	-32768, 32767, -32768, 32767, -32768, 32767, 32767, 32767,
	32767, -32768, -32768, 32767, -32768, 32767, 32767, 32767,
	-32768, 32767, 32767, 32767, -32768, -32768, -32768, -32768,
	-32768, -32768, 32767, 32767, 32767, -32768, -32768, 32767,
	32767, 32767, -32768, 32767, -32768, -32768, 32767, -32768,
	-32768, 32767, 32767, 32767, 32767, -32768, 32767, -32768,
	32767, 32767, 32767, -32768, 32767, -32768, 32767, -32768,
	-32768, -32768, 32767, -32768, -32768, 32767, -32768, -32768,
	-32768, -32768, 32767, 32767, -32768, -32768, 32767, 32767,
	32767, -32768, -32768, -32768, -32768, 32767, -32768, 32767,
	32767, 32767, 32767, -32768, 32767, 32767, -32768, 32767,
	32767, -32768, -32768, 32767, 32767, -32768, 32767, -32768,
	-32768, -32768, -32768, 32767, 32767, 32767, -32768, 32767,
	32767, 32767, 32767, -32768, -32768, -32768, -32768
};

float filter1_noiseOutput[511] =
{
	0.00007277, 0.00023171, -0.00009640, -0.00118741, -0.00095628, 0.00237882, 0.00434871, -0.00132925,
	-0.00916782, -0.00479823, 0.01082999, 0.01528388, -0.00339956, -0.02289269, -0.01355369, 0.01788286,
	0.03070594, 0.00219468, -0.03527754, -0.02883984, 0.02132736, 0.04924683, 0.00748781, -0.05404049,
	-0.04250533, 0.03875757, 0.07345783, -0.00242584, -0.08728209, -0.04917834, 0.07010566, 0.09845189,
	-0.01758313, -0.12049851, -0.05634873, 0.09766692, 0.12353277, -0.03135320, -0.15572109, -0.05809888,
	0.13773919, 0.14120101, -0.07248650, -0.19111636, -0.02176494, 0.19241444, 0.11872111, -0.14486712,
	-0.19341419, 0.06109655, 0.22933164, 0.03969355, -0.22039535, -0.13740350, 0.16950059, 0.21465530,
	-0.08626710, -0.25924724, -0.01606767, 0.26471744, 0.12389444, -0.22850925, -0.22387481, 0.15037237,
	0.30133842, -0.03280543, -0.33823027, -0.11559422, 0.31227658, 0.27208788, -0.20405705, -0.39283786,
	0.01631803, 0.42208246, 0.20729588, -0.32315239, -0.38780437, 0.11188392, 0.44821151, 0.13847443,
	-0.35912642, -0.33093509, 0.15844879, 0.39473033, 0.06807471, -0.31894365, -0.23019286, 0.15345894,
	0.27493829, 0.01873802, -0.20808249, -0.12317608, 0.08652834, 0.12958557, 0.01483868, -0.06320158,
	-0.04395701, -0.01351445, -0.00186849, 0.03764600, 0.07573224, 0.01673924, -0.10782873, -0.11866396,
	0.04952786, 0.19327506, 0.08851315, -0.16757060, -0.23283085, 0.02263522, 0.28728195, 0.18423695,
	-0.19331078, -0.34494912, -0.02807202, 0.35953650, 0.27820634, -0.19579148, -0.42761749, -0.08348885,
	0.38622275, 0.34525881, -0.15866160, -0.45497174, -0.15142841, 0.35057962, 0.39392292, -0.07715734,
	-0.45031723, -0.23650899, 0.29322050, 0.44372525, 0.00262030, -0.45199361, -0.30071728, 0.26460941,
	0.47145036, 0.02780700, -0.45164841, -0.29712871, 0.26596127, 0.43883531, -0.00554119, -0.41438711,
	-0.21949163, 0.25941540, 0.32999695, -0.05854900, -0.30843660, -0.09871844, 0.19818948, 0.15917296,
	-0.07552608, -0.12610085, 0.00985844, 0.05262368, -0.02898413, -0.01165989, 0.10424924, 0.05448587,
	-0.16569545, -0.17928928, 0.14105020, 0.32807341, 0.00308675, -0.41297842, -0.23836922, 0.35867151,
	0.48021404, -0.14229852, -0.62095029, -0.18762418, 0.57705782, 0.52390017, -0.32864377, -0.73932067,
	-0.06492341, 0.73583002, 0.47856602, -0.48802910, -0.76335863, 0.06315617, 0.80495915, 0.39585156,
	-0.57459605, -0.72163318, 0.14926725, 0.79042641, 0.31209948, -0.57872344, -0.63288596, 0.17802911,
	0.69592856, 0.24414787, -0.49472798, -0.51872520, 0.13370295, 0.54932423, 0.22236978, -0.35144434,
	-0.42560543, 0.03737231, 0.40970621, 0.24329882, -0.21015323, -0.37324675, -0.06378321, 0.31290411,
	0.28402829, -0.10719476, -0.35867867, -0.14255912, 0.26538087, 0.32588973, -0.05251553, -0.36766805,
	-0.18648742, 0.25365261, 0.35142765, -0.03309870, -0.37442555, -0.20129422, 0.24812509, 0.35234083,
	-0.02914952, -0.36123582, -0.18784662, 0.23343470, 0.31436765, -0.03378131, -0.30871134, -0.14733937,
	0.19202424, 0.23902474, -0.03199977, -0.22188576, -0.09588078, 0.13026302, 0.14722135, -0.02550061,
	-0.12582171, -0.04193519, 0.07068142, 0.05746654, -0.02445344, -0.04016459, 0.00761335, 0.02077233,
	-0.01345122, -0.01926659, 0.02029815, 0.03439094, -0.00990302, -0.04824110, -0.01894936, 0.04192162,
	0.05013407, -0.01088257, -0.06306472, -0.03160945, 0.04818417, 0.06445442, -0.01337835, -0.07390141,
	-0.02282622, 0.06266408, 0.04625737, -0.04509500, -0.05737564, 0.03259212, 0.06714593, -0.02400982,
	-0.08448691, 0.00876130, 0.10824042, 0.02382259, -0.12781906, -0.07769264, 0.12799634, 0.14768510,
	-0.09374187, -0.21894846, 0.01524223, 0.26767858, 0.10614521, -0.26489491, -0.25201665, 0.18453539,
	0.38340742, -0.01715761, -0.44509658, -0.21316705, 0.38480313, 0.44150621, -0.18428781, -0.57907164,
	-0.11688730, 0.55220315, 0.42480559, -0.34290596, -0.62545281, 0.00764472, 0.63562551, 0.33990182,
	-0.44366731, -0.57598246, 0.11708256, 0.61890967, 0.22495636, -0.46245034, -0.45998368, 0.17864615,
	0.51317591, 0.11255299, -0.39045207, -0.29837818, 0.17428045, 0.32796232, 0.02135842, -0.23451679,
	-0.11394594, 0.10952723, 0.09617084, -0.04315620, -0.03312790, 0.06681008, 0.01342327, -0.13452655,
	-0.08438269, 0.15704415, 0.21394768, -0.06886775, -0.30803858, -0.11640007, 0.27665735, 0.30563972,
	-0.10295243, -0.38602676, -0.13816933, 0.30127409, 0.32587105, -0.08839250, -0.36794210, -0.14692112,
	0.25250190, 0.29390170, -0.04789997, -0.29608545, -0.14115243, 0.17464072, 0.23142906, -0.00864576,
	-0.20222101, -0.11430460, 0.09815416, 0.14780062, 0.00634013, -0.10606830, -0.05614796, 0.04371198,
	0.04578203, -0.01293914, -0.01340817, 0.02822216, 0.00634465, -0.06109655, -0.04420236, 0.06561131,
	0.10464718, -0.01438285, -0.13874876, -0.07820369, 0.10546750, 0.16058840, -0.00405250, -0.17623517,
	-0.11933277, 0.10239201, 0.19771679, 0.03253038, -0.18356478, -0.16362745, 0.07619748, 0.22407972,
	0.07718687, -0.17927310, -0.20390949, 0.04522068, 0.24095048, 0.11720760, -0.16708602, -0.23144225,
	0.01453970, 0.24321234, 0.14692273, -0.14652291, -0.24371957, -0.01433333, 0.23277612, 0.16585202,
	-0.12184812, -0.24069326, -0.03457764, 0.21084505, 0.16408569, -0.09968889, -0.21392110, -0.03396891,
	0.17539850, 0.12911373, -0.08343131, -0.15423504, -0.00696765, 0.12115727, 0.05512588, -0.07174137,
	-0.05859669, 0.04458343, 0.04815714, -0.04655417, -0.05801018, 0.05105223, 0.09505324, -0.02349164,
	-0.13088293, -0.04550217, 0.12407870, 0.12659487, -0.05536527, -0.17013222, -0.05399187, 0.13984178,
	0.15257501, -0.03644124, -0.18638461, -0.10010562, 0.12647646, 0.20669106, 0.01426770, -0.22389462,
	-0.18072613, 0.12539425, 0.29484790, 0.06281490, -0.29040948, -0.26684510, 0.14688344, 0.39346707,
	0.09452269, -0.37047138, -0.34040225, 0.18351034, 0.48023347, 0.10698002, -0.43730679, -0.38320410,
	0.21225306, 0.52123593, 0.10797086, -0.45253195, -0.38592178, 0.20210027, 0.49856748, 0.11900984,
	-0.39871678, -0.36619294, 0.13989520, 0.43355698, 0.15155719, -0.30621263, -0.34338318, 0.06182189,
	0.36415579, 0.17774075, -0.23146889, -0.31328386, 0.02860743, 0.31340530, 0.15139013, -0.21293488,
	-0.25449916, 0.07394862, 0.27722458, 0.05545054, -0.24490084, -0.15756449, 0.18199406, 0.23524722,
	-0.09564815, -0.29023391, -0.01956884, 0.30783436, 0.16214474, -0.26019340, -0.30551046, 0.12751434,
	0.39706780, 0.07590969, -0.38083020, -0.29074538, 0.23445332, 0.43219584, 0.00497389, -0.43445428,
	-0.25064833, 0.29021957, 0.40877740, -0.05666436, -0.42622049, -0.17572935, 0.31263395
};

short filter1_multiSineInput[478] =
{
	14046, 15545, 16958, 18276, 19492, 20599, 21592, 22465,
	23215, 23839, 24335, 24704, 24944, 25058, 25047, 24916,
	24668, 24309, 23843, 23278, 22621, 21879, 21060, 20172,
	19225, 18228, 17188, 16116, 15020, 13910, 12792, 11677,
	10571, 9482, 8416, 7381, 6381, 5421, 4507, 3640,
	2825, 2062, 1354, 701, 103, -441, -932, -1372,
	-1764, -2111, -2415, -2682, -2915, -3118, -3296, -3453,
	-3594, -3723, -3845, -3963, -4081, -4203, -4332, -4471,
	-4621, -4784, -4961, -5152, -5358, -5577, -5809, -6051,
	-6301, -6556, -6812, -7066, -7313, -7548, -7766, -7963,
	-8133, -8271, -8370, -8427, -8436, -8392, -8290, -8127,
	-7900, -7604, -7238, -6800, -6290, -5706, -5049, -4322,
	-3526, -2664, -1741, -762, 268, 1342, 2454, 3594,
	4754, 5925, 7097, 8260, 9404, 10517, 11589, 12609,
	13565, 14448, 15247, 15952, 16553, 17043, 17411, 17652,
	17759, 17726, 17550, 17227, 16754, 16132, 15360, 14440,
	13376, 12172, 10833, 9366, 7780, 6083, 4286, 2401,
	439, -1586, -3660, -5769, -7898, -10031, -12153, -14247,
	-16297, -18289, -20207, -22036, -23760, -25368, -26845, -28179,
	-29361, -30379, -31225, -31893, -32375, -32668, -32768, -32674,
	-32387, -31907, -31238, -30384, -29352, -28149, -26783, -25266,
	-23608, -21821, -19920, -17919, -15831, -13675, -11464, -9216,
	-6948, -4677, -2418, -190, 1994, 4115, 6161, 8116,
	9967, 11701, 13308, 14777, 16100, 17268, 18275, 19116,
	19789, 20291, 20620, 20779, 20770, 20595, 20260, 19771,
	19135, 18361, 17457, 16435, 15305, 14078, 12768, 11386,
	9947, 8462, 6945, 5409, 3868, 2334, 819, -666,
	-2107, -3497, -4824, -6080, -7256, -8347, -9346, -10249,
	-11050, -11749, -12342, -12829, -13212, -13489, -13666, -13743,
	-13725, -13618, -13426, -13154, -12811, -12402, -11935, -11416,
	-10855, -10257, -9631, -8984, -8323, -7654, -6985, -6321,
	-5668, -5030, -4412, -3817, -3248, -2708, -2198, -1718,
	-1270, -852, -463, -102, 235, 549, 845, 1125,
	1394, 1656, 1916, 2178, 2446, 2726, 3021, 3336,
	3674, 4039, 4434, 4861, 5323, 5820, 6354, 6925,
	7531, 8172, 8846, 9549, 10279, 11031, 11801, 12582,
	13370, 14157, 14938, 15703, 16447, 17161, 17837, 18467,
	19043, 19559, 20005, 20375, 20661, 20859, 20961, 20962,
	20859, 20648, 20325, 19889, 19340, 18677, 17901, 17014,
	16020, 14922, 13727, 12439, 11066, 9616, 8098, 6522,
	4897, 3234, 1546, -157, -1861, -3555, -5225, -6860,
	-8446, -9972, -11425, -12794, -14067, -15234, -16286, -17213,
	-18008, -18663, -19172, -19531, -19735, -19783, -19673, -19404,
	-18977, -18396, -17664, -16786, -15767, -14614, -13337, -11944,
	-10445, -8851, -7174, -5426, -3620, -1771, 110, 2007,
	3906, 5794, 7655, 9478, 11247, 12950, 14574, 16108,
	17540, 18860, 20058, 21127, 22057, 22844, 23481, 23965,
	24292, 24461, 24471, 24322, 24016, 23556, 22946, 22191,
	21296, 20269, 19117, 17849, 16473, 15001, 13442, 11807,
	10108, 8356, 6562, 4739, 2899, 1052, -789, -2613,
	-4410, -6169, -7879, -9532, -11118, -12630, -14060, -15402,
	-16649, -17797, -18841, -19777, -20604, -21319, -21922, -22412,
	-22790, -23056, -23214, -23266, -23215, -23065, -22820, -22485,
	-22065, -21567, -20995, -20355, -19655, -18900, -18097, -17253,
	-16373, -15463, -14531, -13583, -12623, -11657, -10691, -9730,
	-8778, -7840, -6920, -6020, -5145, -4298, -3480, -2695,
	-1944, -1228, -549, 92, 695, 1258, 1783, 2268,
	2715, 3122, 3491, 3822, 4116, 4372, 4593, 4778,
	4929, 5045, 5128, 5178, 5195, 5180, 5134, 5056,
	4948, 4809, 4639, 4439, 4209, 3949
};

float filter1_multiSineOutput[478] =
{
	0.00003119, 0.00010265, -0.00002759, -0.00050047, -0.00045635, 0.00093190, 0.00189031, -0.00034511,
	-0.00377800, -0.00227194, 0.00436370, 0.00653532, -0.00171793, -0.01017940, -0.00454339, 0.01010865,
	0.01227477, -0.00444025, -0.01747367, -0.00582324, 0.01639950, 0.01671548, -0.00790647, -0.02306682,
	-0.00546545, 0.02119189, 0.01840082, -0.01098563, -0.02530870, -0.00378190, 0.02307895, 0.01717222,
	-0.01261774, -0.02388339, -0.00162702, 0.02168265, 0.01384644, -0.01225235, -0.01958033, 0.00012104,
	0.01758086, 0.00964850, -0.00999149, -0.01377378, 0.00092262, 0.01194667, 0.00570053, -0.00646632,
	-0.00788235, 0.00069832, 0.00610047, 0.00271597, -0.00256261, -0.00297913, -0.00025290, 0.00113433,
	0.00092277, 0.00087507, 0.00038360, -0.00144592, -0.00230422, 0.00015948, 0.00326243, 0.00215504,
	-0.00241331, -0.00405423, 0.00005543, 0.00437171, 0.00264026, -0.00285075, -0.00434780, 0.00021211,
	0.00430885, 0.00230910, -0.00267408, -0.00364490, 0.00033111, 0.00340872, 0.00162585, -0.00199499,
	-0.00246085, 0.00026849, 0.00209851, 0.00093844, -0.00104475, -0.00123259, 0.00002368, 0.00077389,
	0.00043679, -0.00008248, -0.00024594, -0.00031203, -0.00028325, 0.00016764, 0.00068135, 0.00037717,
	-0.00061876, -0.00093620, 0.00008226, 0.00112879, 0.00064756, -0.00080029, -0.00118063, 0.00009232,
	0.00124229, 0.00065608, -0.00081273, -0.00110403, 0.00011554, 0.00108423, 0.00052007, -0.00066842,
	-0.00083567, 0.00010169, 0.00076131, 0.00034280, -0.00042094, -0.00050264, 0.00003863, 0.00038738,
	0.00019199, -0.00014146, -0.00020086, -0.00005647, 0.00005487, 0.00009603, 0.00010439, 0.00001654,
	-0.00015273, -0.00018048, 0.00005257, 0.00027248, 0.00013639, -0.00022084, -0.00030147, 0.00004253,
	0.00034637, 0.00017375, -0.00024340, -0.00032145, 0.00004351, 0.00033467, 0.00015733, -0.00021849,
	-0.00027149, 0.00003903, 0.00026270, 0.00011683, -0.00015740, -0.00018733, 0.00002233, 0.00016211,
	0.00007480, -0.00007891, -0.00009955, -0.00000451, 0.00006182, 0.00004353, -0.00000263, -0.00002823,
	-0.00003408, -0.00001789, 0.00002597, 0.00005625, 0.00001802, -0.00005796, -0.00006740, 0.00001895,
	0.00008980, 0.00003980, -0.00007004, -0.00008670, 0.00001691, 0.00009757, 0.00004327, -0.00006826,
	-0.00008233, 0.00001490, 0.00008483, 0.00003637, -0.00005456, -0.00006371, 0.00001020, 0.00005991,
	0.00002609, -0.00003359, -0.00004006, 0.00000259, 0.00003138, 0.00001697, -0.00001097, -0.00001828,
	-0.00000635, 0.00000608, 0.00001093, 0.00000840, -0.00000222, -0.00001433, -0.00001194, 0.00000783,
	0.00002138, 0.00000711, -0.00001939, -0.00002145, 0.00000651, 0.00002697, 0.00001068, -0.00002055,
	-0.00002347, 0.00000560, 0.00002599, 0.00001043, -0.00001796, -0.00002028, 0.00000419, 0.00002048,
	0.00000836, -0.00001269, -0.00001447, 0.00000200, 0.00001283, 0.00000598, -0.00000627, -0.00000825,
	-0.00000068, 0.00000523, 0.00000413, -0.00000021, -0.00000308, -0.00000325, -0.00000083, 0.00000301,
	0.00000439, 0.00000040, -0.00000514, -0.00000465, 0.00000243, 0.00000698, 0.00000220, -0.00000597,
	-0.00000623, 0.00000207, 0.00000757, 0.00000272, -0.00000566, -0.00000606, 0.00000163, 0.00000661,
	0.00000249, -0.00000443, -0.00000482, 0.00000100, 0.00000472, 0.00000196, -0.00000269, -0.00000317,
	0.00000021, 0.00000256, 0.00000146, -0.00000088, -0.00000162, -0.00000061, 0.00000063, 0.00000110,
	0.00000064, -0.00000044, -0.00000128, -0.00000075, 0.00000088, 0.00000165, 0.00000028, -0.00000167,
	-0.00000151, 0.00000074, 0.00000208, 0.00000060, -0.00000172, -0.00000171, 0.00000060, 0.00000201,
	0.00000066, -0.00000148, -0.00000152, 0.00000041, 0.00000159, 0.00000059, -0.00000104, -0.00000112,
	0.00000018, 0.00000102, 0.00000047, -0.00000051, -0.00000068, -0.00000007, 0.00000045, 0.00000038,
	-0.00000002, -0.00000031, -0.00000029, -0.00000001, 0.00000031, 0.00000034, -0.00000004, -0.00000043,
	-0.00000030, 0.00000027, 0.00000055, 0.00000011, -0.00000049, -0.00000043, 0.00000023, 0.00000060,
	0.00000017, -0.00000046, -0.00000043, 0.00000017, 0.00000052, 0.00000017, -0.00000035, -0.00000036,
	0.00000010, 0.00000038, 0.00000015, -0.00000022, -0.00000025, 0.00000002, 0.00000021, 0.00000012,
	-0.00000008, -0.00000015, -0.00000006, 0.00000006, 0.00000010, 0.00000004, -0.00000007, -0.00000012,
	-0.00000005, 0.00000008, 0.00000011, -0.00000001, -0.00000015, -0.00000012, 0.00000006, 0.00000015,
	0.00000002, -0.00000016, -0.00000014, 0.00000005, 0.00000014, 0.00000003, -0.00000013, -0.00000012,
	0.00000003, 0.00000012, 0.00000003, -0.00000009, -0.00000009, 0.00000001, 0.00000008, 0.00000004,
	-0.00000004, -0.00000005, -0.00000000, 0.00000004, 0.00000004, 0.00000000, -0.00000002, -0.00000002,
	0.00000001, 0.00000004, 0.00000004, 0.00000000, -0.00000002, -0.00000001, 0.00000004, 0.00000005,
	0.00000002, -0.00000003, -0.00000002, 0.00000003, 0.00000006, 0.00000002, -0.00000003, -0.00000002,
	0.00000003, 0.00000005, 0.00000002, -0.00000002, -0.00000002, 0.00000001, 0.00000003, 0.00000001,
	-0.00000002, -0.00000002, 0.00000000, 0.00000002, 0.00000001, -0.00000001, -0.00000002, -0.00000001,
	0.00000000, 0.00000000, -0.00000000, -0.00000001, -0.00000002, -0.00000001, -0.00000000, 0.00000000,
	-0.00000001, -0.00000002, -0.00000002, -0.00000000, 0.00000000, -0.00000001, -0.00000002, -0.00000002,
	-0.00000000, 0.00000000, -0.00000000, -0.00000002, -0.00000001, -0.00000000, 0.00000000, -0.00000000,
	-0.00000001, -0.00000001, -0.00000000, 0.00000001, 0.00000000, -0.00000000, -0.00000000, 0.00000000,
	0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000000, 0.00000001, 0.00000001,
	0.00000000, 0.00000000, 0.00000000, 0.00000001, 0.00000001, 0.00000000, 0.00000000, 0.00000000,
	0.00000001, 0.00000001, 0.00000000, -0.00000000, 0.00000000, 0.00000000, 0.00000001, 0.00000000,
	-0.00000000, -0.00000000, 0.00000000, 0.00000000, 0.00000000, -0.00000000, -0.00000000, -0.00000000,
	0.00000000, 0.00000000, -0.00000000, -0.00000000, -0.00000000, -0.00000000, 0.00000000, -0.00000000,
	-0.00000000, -0.00000000, -0.00000000, 0.00000000, 0.00000000, -0.00000000
};

short filter1_overflowInput[239] =
{
	-32768, 32767, 32767, 32767, -32768, -32768, 32767, 32767,
	32767, 32767, -32768, -32768, -32768, 32767, 32767, -32768,
	-32768, -32768, 32767, 32767, -32768, -32768, -32768, 32767,
	32767, -32768, -32768, -32768, 32767, 32767, -32768, -32768,
	-32768, 32767, 32767, 32767, -32768, -32768, 32767, 32767,
	32767, -32768, -32768, -32768, 32767, 32767, 32767, -32768,
	-32768, -32768, 32767, 32767, -32768, -32768, -32768, 32767,
	32767, -32768, -32768, -32768, 32767, 32767, -32768, -32768,
	-32768, 32767, 32767, -32768, -32768, -32768, 32767, 32767,
	-32768, -32768, -32768, 32767, 32767, 32767, -32768, -32768,
	-32768, -32768, 32767, 32767, -32768, -32768, -32768, 32767,
	32767, -32768, -32768, -32768, 32767, 32767, -32768, -32768,
	-32768, 32767, 32767, -32768, -32768, -32768, 32767, 32767,
	-32768, -32768, -32768, 32767, 32767, -32768, -32768, -32768,
	-32768, 32767, 32767, 32767, -32768, -32768, -32768, 32767,
	32767, -32768, -32768, -32768, 32767, 32767, -32768, -32768,
	-32768, 32767, 32767, -32768, -32768, -32768, 32767, 32767,
	-32768, -32768, -32768, 32767, 32767, -32768, -32768, -32768,
	32767, 32767, 32767, -32768, -32768, -32768, -32768, 32767,
	32767, -32768, -32768, -32768, 32767, 32767, -32768, -32768,
	-32768, 32767, 32767, -32768, -32768, -32768, 32767, 32767,
	-32768, -32768, -32768, 32767, 32767, -32768, -32768, -32768,
	32767, 32767, -32768, -32768, -32768, -32768, -32768, 32767,
	32767, -32768, -32768, -32768, 32767, 32767, -32768, -32768,
	-32768, 32767, 32767, -32768, -32768, -32768, 32767, 32767,
	-32768, -32768, -32768, 32767, 32767, -32768, -32768, -32768,
	32767, 32767, -32768, -32768, -32768, 32767, 32767, -32768,
	-32768, -32768, 32767, 32767, -32768, -32768, 32767, 32767,
	32767, -32768, -32768, 32767, 32767, 32767, -32768, -32768,
	32767, 32767, 32767, -32768, -32768, 32767, 32767
};

float filter1_overflowOutput[239] =
{
	-0.00007277, -0.00008616, 0.00055981, 0.00099461, -0.00156409, -0.00475479, 0.00074728, 0.01286491,
	0.00822908, -0.02081542, -0.03135429, 0.01444844, 0.06318241, 0.02242372, -0.07921537, -0.08858357,
	0.04659340, 0.15097802, 0.04694062, -0.15582228, -0.16824646, 0.06584976, 0.24438608, 0.10096286,
	-0.20404040, -0.26356801, 0.03153928, 0.31564031, 0.20440354, -0.19192170, -0.37385537, -0.07753247,
	0.35542720, 0.36410099, -0.11494120, -0.49927964, -0.25542086, 0.36864518, 0.56743025, 0.00994795,
	-0.62945146, -0.47271746, 0.35662780, 0.77901013, 0.16325371, -0.73503891, -0.69238021, 0.30921774,
	0.95358516, 0.32757199, -0.77904044, -0.87121318, 0.21634569, 1.03860781, 0.47678744, -0.72610326,
	-0.95892897, 0.07804078, 0.98788065, 0.58170356, -0.55639449, -0.92217781, -0.10000527, 0.78590242,
	0.63105737, -0.27462902, -0.76475583, -0.30933301, 0.45656939, 0.63360589, 0.08896366, -0.52204852,
	-0.53590567, 0.05267854, 0.60750998, 0.48662961, -0.24347617, -0.75922441, -0.36235490, 0.56883456,
	0.86364355, 0.02480327, -0.94919332, -0.72647806, 0.51908543, 1.15687337, 0.24709543, -1.05916215,
	-0.97493015, 0.44710645, 1.29306727, 0.39311732, -1.03557880, -1.05297651, 0.33342005, 1.22069149,
	0.45783906, -0.84611103, -0.95279324, 0.15938620, 0.94293613, 0.46441414, -0.50002253, -0.71546257,
	-0.07855103, 0.51500984, 0.44700268, -0.04623155, -0.40826622, -0.36261464, 0.02050190, 0.43302749,
	0.44338814, -0.09864234, -0.65713280, -0.45376358, 0.43320725, 0.88673574, 0.15971304, -0.90462644,
	-0.82252650, 0.43089245, 1.18740658, 0.33419637, -1.02725013, -1.01509884, 0.39073632, 1.26681123,
	0.41813824, -0.96647329, -1.00562459, 0.27996990, 1.10349230, 0.43384042, -0.71084873, -0.82429867,
	0.08358582, 0.73947501, 0.41875293, -0.29915877, -0.53820944, -0.18710609, 0.25870795, 0.40598013,
	0.19532630, -0.22250414, -0.49703747, -0.24344686, 0.41136926, 0.68657798, 0.06275238, -0.79244293,
	-0.68103359, 0.42505838, 1.08418118, 0.28008837, -1.00270928, -0.97722229, 0.41980937, 1.29750506,
	0.40605778, -1.05658183, -1.07629529, 0.36147268, 1.26901285, 0.44605722, -0.91333654, -0.97694434,
	0.22219581, 1.00528343, 0.43272768, -0.58286124, -0.72979607, -0.00395411, 0.57048821, 0.40594973,
	-0.12113044, -0.41091239, -0.29567457, 0.05871138, 0.39428629, 0.38999723, -0.09362513, -0.61050641,
	-0.43365390, 0.40802093, 0.85826552, 0.16002936, -0.88594462, -0.80628951, 0.43498190, 1.17240325,
	0.30599682, -1.03414604, -0.97669210, 0.43255655, 1.24393532, 0.34582016, -0.98535771, -0.92731802,
	0.35252724, 1.05556669, 0.32023842, -0.72489300, -0.70561721, 0.16935278, 0.66129240, 0.28151447,
	-0.29635229, -0.39381935, -0.10723773, 0.15759459, 0.26845516, 0.21814322, -0.07462889, -0.43677717,
	-0.35235815, 0.29455838, 0.72651267, 0.19264584, -0.76362022, -0.78705343, 0.34981580, 1.15255965,
	0.38039278, -1.03741540, -1.10062639, 0.41699092, 1.45415662, 0.48028847, -1.23425292, -1.27634689,
	0.49009975, 1.62067912, 0.49222430, -1.35164166, -1.31923153, 0.56599898, 1.66324800
};

short filter1_testOutput[511];

filter1Type *filter1_create( void )
{
	filter1Type *result = (filter1Type *)malloc( sizeof( filter1Type ) );	// Allocate memory for the object
	filter1_init( result );											// Initialize it
	return result;																// Return the result
}

void filter1_destroy( filter1Type *pObject )
{
	free( pObject );
}

 void filter1_init( filter1Type * pThis )
{
	filter1_reset( pThis );

}

 void filter1_reset( filter1Type * pThis )
{
	memset( &pThis->state, 0, sizeof( pThis->state ) ); // Reset state to 0
	pThis->output = 0;									// Reset output

}

 int filter1_filterBlock( filter1Type * pThis, short * pInput, short * pOutput, unsigned int count )
{
	filter1_executionState executionState;          // The executionState structure holds call data, minimizing stack reads and writes
	if( ! count ) return 0;                         // If there are no input samples, return immediately
	executionState.pInput = pInput;                 // Pointers to the input and output buffers that each call to filterBiquad() will use
	executionState.pOutput = pOutput;               // - pInput and pOutput can be equal, allowing reuse of the same memory.
	executionState.count = count;                   // The number of samples to be processed
	executionState.pState = pThis->state;                   // Pointer to the biquad's internal state and coefficients.
	executionState.pCoefficients = filter1_coefficients;    // Each call to filterBiquad() will advance pState and pCoefficients to the next biquad

	// The 1st call to filter1_filterBiquad() reads from the caller supplied input buffer and writes to the output buffer.
	// The remaining calls to filterBiquad() recycle the same output buffer, so that multiple intermediate buffers are not required.

	filter1_filterBiquad_12_14_15( &executionState );		// Run biquad #0
	executionState.pInput = executionState.pOutput;         // The remaining biquads will now re-use the same output buffer.

	filter1_filterBiquad_11_14_15( &executionState );		// Run biquad #1

	filter1_filterBiquad_12_14_15( &executionState );		// Run biquad #2

	filter1_filterBiquad_10_14_15( &executionState );		// Run biquad #3

	// At this point, the caller-supplied output buffer will contain the filtered samples and the input buffer will contain the unmodified input samples.
	return count;		// Return the number of samples processed, the same as the number of input samples

}

 void filter1_filterBiquad_12_14_15( filter1_executionState * pExecState )
{
	// Read state variables
	short w0, x0;
	short w1 = pExecState->pState[0];
	short w2 = pExecState->pState[1];

	// Read coefficients into work registers
	short b0 = *(pExecState->pCoefficients++);
	short b1 = *(pExecState->pCoefficients++);
	short b2 = *(pExecState->pCoefficients++);
	short a1 = *(pExecState->pCoefficients++);
	short a2 = *(pExecState->pCoefficients++);

	// Read source and target pointers
	short *pInput  = pExecState->pInput;
	short *pOutput = pExecState->pOutput;
	short count = pExecState->count;
	long accumulator;

	// Loop for all samples in the input buffer
	while( count-- )
	{
		// Read input sample
		x0 = *(pInput++);

		// Run feedback part of filter
		accumulator  = (long)w2 * a2;
		accumulator += (long)w1 * a1;
		accumulator += (long)x0  << 12;

		w0 = accumulator  >> 14;

		// Run feedforward part of filter
		accumulator  = (long)w0 * b0;
		accumulator += (long)w1 * b1;
		accumulator += (long)w2 * b2;

		w2 = w1;		// Shuffle history buffer
		w1 = w0;

		// Write output
		*(pOutput++) = accumulator  >> 15;
	}

	// Write state variables
	*(pExecState->pState++) = w1;
	*(pExecState->pState++) = w2;

}

 void filter1_filterBiquad_11_14_15( filter1_executionState * pExecState )
{
	// Read state variables
	short w0, x0;
	short w1 = pExecState->pState[0];
	short w2 = pExecState->pState[1];

	// Read coefficients into work registers
	short b0 = *(pExecState->pCoefficients++);
	short b1 = *(pExecState->pCoefficients++);
	short b2 = *(pExecState->pCoefficients++);
	short a1 = *(pExecState->pCoefficients++);
	short a2 = *(pExecState->pCoefficients++);

	// Read source and target pointers
	short *pInput  = pExecState->pInput;
	short *pOutput = pExecState->pOutput;
	short count = pExecState->count;
	long accumulator;

	// Loop for all samples in the input buffer
	while( count-- )
	{
		// Read input sample
		x0 = *(pInput++);

		// Run feedback part of filter
		accumulator  = (long)w2 * a2;
		accumulator += (long)w1 * a1;
		accumulator += (long)x0  << 11;

		w0 = accumulator  >> 14;

		// Run feedforward part of filter
		accumulator  = (long)w0 * b0;
		accumulator += (long)w1 * b1;
		accumulator += (long)w2 * b2;

		w2 = w1;		// Shuffle history buffer
		w1 = w0;

		// Write output
		*(pOutput++) = accumulator  >> 15;
	}

	// Write state variables
	*(pExecState->pState++) = w1;
	*(pExecState->pState++) = w2;

}

 void filter1_filterBiquad_10_14_15( filter1_executionState * pExecState )
{
	// Read state variables
	short w0, x0;
	short w1 = pExecState->pState[0];
	short w2 = pExecState->pState[1];

	// Read coefficients into work registers
	short b0 = *(pExecState->pCoefficients++);
	short b1 = *(pExecState->pCoefficients++);
	short b2 = *(pExecState->pCoefficients++);
	short a1 = *(pExecState->pCoefficients++);
	short a2 = *(pExecState->pCoefficients++);

	// Read source and target pointers
	short *pInput  = pExecState->pInput;
	short *pOutput = pExecState->pOutput;
	short count = pExecState->count;
	long accumulator;

	// Loop for all samples in the input buffer
	while( count-- )
	{
		// Read input sample
		x0 = *(pInput++);

		// Run feedback part of filter
		accumulator  = (long)w2 * a2;
		accumulator += (long)w1 * a1;
		accumulator += (long)x0  << 10;

		w0 = accumulator  >> 14;

		// Run feedforward part of filter
		accumulator  = (long)w0 * b0;
		accumulator += (long)w1 * b1;
		accumulator += (long)w2 * b2;

		w2 = w1;		// Shuffle history buffer
		w1 = w0;

		// Write output
		*(pOutput++) = accumulator  >> 15;
	}

	// Write state variables
	*(pExecState->pState++) = w1;
	*(pExecState->pState++) = w2;

}

 void filter1_runTests(  void  )
{
	float actual;
	int samplesProcessed;

	filter1Type *filter = filter1_create();	// Create an instance of the filter

	printf( "\n\nRunning tests for: filter1\n" );

	printf( "\nimpulse test\n" );
 	filter1_reset( filter );
	samplesProcessed = filter1_filterInChunks( filter, filter1_impulseInput, filter1_testOutput, 239 );		// Filter the input test signal
	filter1_compareResult( filter1_testOutput, filter1_impulseOutput, samplesProcessed, 0.0078125, 0.001 );	// Compare with the pre-computed output signal

	printf( "\nnoise test\n" );
 	filter1_reset( filter );
	samplesProcessed = filter1_filterInChunks( filter, filter1_noiseInput, filter1_testOutput, 511 );		// Filter the input test signal
	filter1_compareResult( filter1_testOutput, filter1_noiseOutput, samplesProcessed, 0.0078125, 0.001 );	// Compare with the pre-computed output signal

	printf( "\nmultiSine test\n" );
 	filter1_reset( filter );
	samplesProcessed = filter1_filterInChunks( filter, filter1_multiSineInput, filter1_testOutput, 478 );		// Filter the input test signal
	filter1_compareResult( filter1_testOutput, filter1_multiSineOutput, samplesProcessed, 0.0078125, 0.001 );	// Compare with the pre-computed output signal

	printf( "\noverflow test\n" );
 	filter1_reset( filter );
	samplesProcessed = filter1_filterInChunks( filter, filter1_overflowInput, filter1_testOutput, 239 );		// Filter the input test signal
	filter1_compareResult( filter1_testOutput, filter1_overflowOutput, samplesProcessed, 0.0078125, 0.001 );	// Compare with the pre-computed output signal
	actual = filter1_outputToFloat( filter1_testOutput[238] );

	printf( "Overflow test = (%f). Expected = 1.663. ratio=%f. %s\n",
		actual, actual / 1.663f, actual / 1.663f > 0.95f && actual / 1.663f < 1.05f ? "PASS":"FAIL" );

	filter1_destroy( filter );

}

 void filter1_compareResult( short * pInput, float * pReference, int count, float maxThreshold, float msThreshold )
{
	float ms = 0, mx = 0, actual, delta;
	printf( "int	float	expected	delta\n" );
	while( count-- )
	{
		actual = filter1_outputToFloat( *pInput );
		delta =  actual - *pReference;
		printf( "%li	%f	%f	%f\n", (long)*(pInput), actual, *pReference, delta );
		++pInput;
		++pReference;

		ms += delta * delta;
		if( delta > mx ) mx = delta;
		if( -delta > mx ) mx = -delta;
	}

	printf( "Maximum Error: %f. Threshold = %f. Ratio = %f, %s\n", 			mx, maxThreshold, 	mx / maxThreshold, mx < maxThreshold 	? "PASS" : "FAIL" );
	printf( "Mean Squared Error: %f. Threshold = %f. Ratio = %f, %s\n", 		ms, msThreshold, 	ms / msThreshold,  ms < msThreshold 	? "PASS" : "FAIL" );

}

 int filter1_filterInChunks( filter1Type * pThis, short * pInput, short * pOutput, int length )
{
 	int processedLength = 0;
	unsigned int chunkLength, outLength;
	static long random = 0x6428734; // Use pseudo-random number generator to split input into small random length chunks.
	while( length > 0 )
	{
		chunkLength = random & 0xf;											// Choose random chunkLength from 0 - 15
		if( chunkLength > length ) chunkLength = length;					// Limit chunk length to the number of remaining samples
		outLength = filter1_filterBlock( pThis,  pInput, pOutput, chunkLength );		// Filter the block and determine the number of returned samples
		pOutput += outLength;												// Update the output pointer
		processedLength += outLength;										// Update the total number of samples output
		pInput += chunkLength;												// Update the input pointer
		length -= chunkLength;												// Update the number of samples remaining
		random = random + 0x834f4527;										// Cycle the simple random number generator
	}
	return processedLength;													// Return the number of samples processed

}
