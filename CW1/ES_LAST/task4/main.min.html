<html><head><title>Main Control Center for testing</title><link rel=stylesheet href=https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/jquery-ui-timepicker-addon/1.6.1/jquery-ui-timepicker-addon.css><body><div><span>room 1:</span> <button id=1>loading</button> <span>turn on after</span> <input class=timey value=0:0:0 id=from1> <span>turn off after</span> <input class=timey value=0:0:0 id=to1> <button class=setAlarmOff id=time1 data-room=1>loading</button> <button class=setAlarm id=timeset1 data-room=1>loading</button></div><div><span>room 2:</span> <button id=2>loading</button> <span>turn on after</span> <input class=timey value=0:0:0 id=from2> <span>turn off after</span> <input class=timey value=0:0:0 id=to2> <button class=setAlarmOff id=time2 data-room=2>loading</button> <button class=setAlarm id=timeset2 data-room=2>loading</button></div><div><span>room 3:</span> <button id=3>loading</button> <span>turn on after</span> <input class=timey value=0:0:0 id=from3> <span>turn off after</span> <input class=timey value=0:0:0 id=to3> <button class=setAlarmOff id=time3 data-room=3>loading</button> <button class=setAlarm id=timeset3 data-room=3>loading</button></div><div><span>room 4:</span> <button id=4>loading</button> <span>turn on after</span> <input class=timey value=0:0:0 id=from4> <span>turn off after</span> <input class=timey value=0:0:0 id=to4> <button class=setAlarmOff id=time4 data-room=4>loading</button> <button class=setAlarm id=timeset4 data-room=4>loading</button></div><div class=time>current server time is <span id=curr_time></span></div><div>Refreshing data every 3 seconds</div><div>set up server clock</div><input class=timey value=0:0:0 id=set_clock> <button id=setClock data-status=set_clock>Set Up Clock</button><script src=https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js></script><script src=https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js></script><script src=https://cdn.jsdelivr.net/jquery.ui.timepicker.addon/1.4.5/jquery-ui-timepicker-addon.min.js></script><script>$(function(){function t(t,a){$.ajax({url:t+a,method:'GET',dataType:'text'})}function a(){var t=$.ajax({url:app.init,method:'GET',dataType:'text'});t.done(function(t){console.log(JSON.parse(t)),app.data=JSON.parse(t),o(),setTimeout(a,3e3)})}function o(){app.data.rooms.forEach(function(t,a){var o=$('#'+(a+1));0==t?o.text('turn ON').data('status','off'):1==t?o.text('turn OFF').data('status','on'):2==t&&o.text('HUSH').data('status','blink')}),app.data.timeControl.forEach(function(t,a){var o=$('#time'+(a+1)),r=$('#timeset'+(a+1));0==t?(o.hide(),r.text('SET ON/OFF TIMES')):1==t&&(r.text('SET ON/OFF TIMES'),o.text('timeControl turn OFF').show())}),app.timeControl&&(app.data.zoneOn.forEach(function(t,a){var o=$('#from'+(a+1)),r=t%60,e=Math.floor(t/60)%60,p=Math.floor(t/3600),n=p.toString()+':'+e.toString()+':'+r.toString();o.val(n)}),app.data.zoneOff.forEach(function(t,a){var o=$('#to'+(a+1)),r=t%60,e=Math.floor(t/60)%60,p=Math.floor(t/3600),n=p.toString()+':'+e.toString()+':'+r.toString();o.val(n)}),app.timeControl=!1),$('#curr_time').text(app.data.time)}app={},app.timeControl=!0,app.room=$(this).attr('id'),app.on_url='http://192.168.105.190/room_on.cgi?',app.off_url='http://192.168.105.190/room_off.cgi?',app.set_date_url='http://192.168.105.190/setrtc.cgi?',app.set_alarm_url='http://192.168.105.190/setalarm.cgi?',app.set_alarm_off_url='http://192.168.105.190/resetalarm.cgi?',app.init='http://192.168.105.190/get_status.cgi',app.data={},$('.timey').timepicker({timeFormat:'H:m:s',stepHour:1,stepMinute:1,stepSecond:1}),a(),$('button').on('click',function(){var a=$(this),o=a.data('status'),r=$(this).attr('id'),e=a.data('room');'off'==o?(t(app.on_url,r),a.text('turn OFF').data('status','on')):'on'==o?(t(app.off_url,r),a.text('turn ON').data('status','off')):'blink'==o?(t(app.on_url,r),a.text('turn OFF').data('status','on')):'set_clock'==o?(t(app.set_date_url,$('#set_clock').val()),$('#curr_time').text('changed')):a.hasClass('setAlarm')?(value=e.toString()+','+$('#from'+e).val()+','+$('#to'+e).val(),t(app.set_alarm_url,value)):a.hasClass('setAlarmOff')&&t(app.set_alarm_off_url,e)})})</script>
